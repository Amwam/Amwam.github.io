<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Using Git push-to-deploy | AMWAM - Amit Shah</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/07ba4309442fe9ac.css" as="style"/><link rel="stylesheet" href="/_next/static/css/07ba4309442fe9ac.css" data-n-g=""/><link rel="preload" href="/_next/static/css/84fcc0fe545abc91.css" as="style"/><link rel="stylesheet" href="/_next/static/css/84fcc0fe545abc91.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-1f10003e17636e37.js" defer=""></script><script src="/_next/static/chunks/main-d8b1ff545a609496.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a0a90843426aebe6.js" defer=""></script><script src="/_next/static/chunks/325-e6c17186e7ab800f.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-cc1ef2fb24cf991e.js" defer=""></script><script src="/_next/static/NNVE04epTJZD8zKiRmsnm/_buildManifest.js" defer=""></script><script src="/_next/static/NNVE04epTJZD8zKiRmsnm/_ssgManifest.js" defer=""></script><script src="/_next/static/NNVE04epTJZD8zKiRmsnm/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="_app_container__HJghf"><div id="Navigation_nav-bar__qBvYL" role="navigation"><img id="Navigation_nav-display-picture__z_2_S" src="/images/me.jpg" alt="Me (Amit)" loading="lazy"/><div id="Navigation_name__xoUmt">Amit Shah</div><div id="Navigation_nav-links__c1Wi_"><div class="Navigation_nav-link__1_q_g"><a href="/">Home</a></div><div class="Navigation_nav-link__1_q_g"><a href="/about">About</a></div><div class="Navigation_nav-link__1_q_g"><a href="/blog">Blog</a></div><div class="Navigation_nav-link__1_q_g"><a href="/contact">Contact</a></div></div></div><div id="_app_content-wrapper__HNwfi"><main id="_app_content__N_c_N"><div><h1>Using Git push-to-deploy</h1><h4>2/6/2015</h4><div class="style_tags__twLQV"><span><a href="/blog?tag=git">git</a> <!-- --></span></div><p>I added the ability to push to deploy.<!-- --></p>
<!-- --><p>I found out about Git&#x27;s &#x27;push to deploy&#x27; feature today based on this <!-- --><a href="https://github.com/blog/1957-git-2-3-has-been-released">post<!-- --></a> and figured its perfect for my setup!
My site is built so that I don&#x27;t have to restart when a new post is added, which means silent updates.<!-- --></p>
<!-- --><p>I already had a hook which would check out my repo, and pull the latest changes, whenever I pushed to the bare repo.
This makes things simpler as I can now choose exactly when I want to deploy.<!-- --></p>
<!-- --><p>To set this up, all you have to do is clone your repo on your server, as you would normally (<!-- --><code>git clone http://path.to.your.repo<!-- --></code>),
then run the following command to allow pushing into the repo.<!-- --></p>
<!-- --><pre><code>git config receive.denyCurrentBranch updateInstead
<!-- --></code></pre>
<!-- --><p>From your development side, setup a new remote such as <!-- --><code>prod<!-- --></code> with the command :<!-- --></p>
<!-- --><pre><code>git remote add prod http://path.to.your.production.repo
<!-- --></code></pre>
<!-- --><p>When ever you want to deploy it becomes a simple case of just running <!-- --><code>git push prod master<!-- --></code>.<!-- --></p></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"POST":"I added the ability to push to deploy.\n\nI found out about Git's 'push to deploy' feature today based on this [post](https://github.com/blog/1957-git-2-3-has-been-released) and figured its perfect for my setup!\nMy site is built so that I don't have to restart when a new post is added, which means silent updates.\n\nI already had a hook which would check out my repo, and pull the latest changes, whenever I pushed to the bare repo. \nThis makes things simpler as I can now choose exactly when I want to deploy.\n\nTo set this up, all you have to do is clone your repo on your server, as you would normally (`git clone http://path.to.your.repo`), \nthen run the following command to allow pushing into the repo.\n\n    git config receive.denyCurrentBranch updateInstead\n\n\nFrom your development side, setup a new remote such as `prod` with the command :\n\n    git remote add prod http://path.to.your.production.repo\n\nWhen ever you want to deploy it becomes a simple case of just running `git push prod master`.\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"git-push-to-deploy"},"buildId":"NNVE04epTJZD8zKiRmsnm","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>